<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Pinewood Derby Timer</title>
        <link href="node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/index.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div class="screen-container">
            <div id="state-disconnected" class="connect-screen">
                <img class="connect-screen__logo" src="assets/img/PWD_Header_Landing_Page_2100x600.jpg" width="100%" />
                <h4 class="connect-screen__cta text-center">To get started, press Connect</h4>
                <form class="connect-screen__connect form-inline justify-content-center">
                    <div class="form-group mx-sm-3">
                        <select id="selectPort" class="form-control">
                            <option>COM1</option>
                            <option>COM2</option>
                            <option selected>COM3</option>
                            <option>COM4</option>
                            <option>COM5</option>
                        </select>
                    </div>
                    <button type="button" class="btn btn-primary" onClick="actions.connectPort();" id="btnConnect">
                        Connect
                    </button>
                </div>
                <div class="connect-screen__instructions hide">
                    <strong>Instructions</strong>
                    <ol>
                        <li>
                            Insert the <em>DerbyStick</em> into the computer and note the COM port it's connected to.
                            <ol>
                                <li>
                                    The computer will assign a COM port number to the <em>DerbyStick</em>. To find this
                                    assigned port number look in your Windows Device Manager. Look under
                                    <em>Start, Control Panel, Systems, Hardware, Device Manager</em>.
                                </li>
                                <li>
                                    In the <em>Device Manager</em> you should find a <em>Ports</em> line if the
                                    <em>DerbyStick</em> was recognized by the system.
                                </li>
                                <li>
                                    The device will be called something with
                                    <em>Silicon Labs</em> in the name. This COM Port number is what you will use when using
                                    <em>DerbyTimer</em>.
                                </li>
                                <li>
                                    If necessary, confirm the settings on the device:<br />
                                    <code
                                        >- Bits per second = 1200<br />
                                        - Data bits= 7<br />
                                        - Parity = none<br />
                                        - Stop bits = 2<br />
                                        - Flow control = none</code
                                    >
                                </li>
                            </ol>
                        </li>
                        <li>Connect the <em>Start Switch</em> wire to first set of pins on the <em>DerbyStick</em>.</li>
                        <li>
                            Connect <em>Light Sensors</em> to the <em>DerbyStick</em> with the black stripe facing up in the
                            <em>1</em> and <em>2</em> pins respectively.
                        </li>
                        <li>
                            Connect IR light bar to plug and place over
                            <em>Light Sensors</em>.
                        </li>
                        <li>
                            Open <em>DerbyTimer</em> and select the COM port noted earlier and click on <em>Connect</em>.
                        </li>
                        <li>
                            Perform the "Initial Reset" by moving the
                            <em>Start Switch</em> from "Open" to "Closed" and back to "Open" - holding the
                            <em>Start Switch</em> "Closed" for at least 0.5 seconds to reset the timer. This will display
                            "DerbyStick4L v1.0 - 2 Lanes Found" (approximately) in the event log when done properly. The
                            <em>DerbyStick</em> LED will also flash once for each sensor found. If no sensors are found, the
                            LED will flash slowly until the timer is removed from the USB and reinserted.
                        </li>
                        <li>
                            When ready to race, hold the Switch closed for at least 0.5 seconds to reset the timer. When the
                            Switch is then opened, the timer will begin timing the race and the LED will turn on while
                            racing. When all cars have finished OR 9.8 seconds has elapsed, the timer will stop and the LED
                            will turn off.
                        </li>
                    </ol>
                </div>
            </div>

            <div id="state-connected" class="timer-screen">
                <section>
                    <div class="result lane1">
                        <h2>Lane 1</h2>
                        <span id="lane1" class="time">0.000s</span>
                        <span id="winner1" class="winner">Winner</span>
                    </div>
                    <div class="result lane2">
                        <h2>Lane 2</h2>
                        <span id="lane2" class="time">0.000s</span>
                        <span id="winner2" class="winner">Winner</span>
                    </div>
                    <div class="result best">
                        <h2>Best</h2>
                        <span id="best" class="time">0.000s</span>
                    </div>
                </section>

                <aside>
                    <h3>Activity Log</h3>
                    <div id="log" class="log">
                        <div class="message"></div>
                    </div>
                    <footer>
                        <button onClick="actions.resetTimer();" id="btnReset">
                            Reset Timer
                        </button>
                        <button onClick="actions.closePort();" id="btnClose">
                            Close Timer
                        </button>
                    </footer>
                </aside>
            </div>
        </div>

        <footer class="fixed-bottom p-1 text-center text-muted">
            <div class="small"><strong class="mr-1">Status</strong><span id="status"></span></div>
            <small
                >Node <span id="node-version"></span> | NW.js <span id="nw-version"></span> | NW.js Flavor
                <span id="nw-flavor"></span
            ></small>
        </footer>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.0/gsap.min.js"></script>
        <script src="assets/js/index.js"></script>
    </body>
</html>
